# src/commands/venv.yaml

description: Setup python virtual environment.

parameters:

  virtual-env:
    description: use python virtual environment
    type: enum
    enum: ["pipenv", "none"]
    default: "none"

steps:
  - when:
      name: Use standard pipenv virtual env configuration
      condition:
        equal: [ << pipeline.virtual-env >>, "pipenv" ]
      steps:
        - run:
            name: Create system venv and install dev packages
            command: |
              PIPENV_VENV_IN_PROJECT=1 pipenv install --dev
              echo "PATH=/.venv/bin:\$PATH" >> $BASH_ENV
