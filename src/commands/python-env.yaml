# src/commands/lint.yaml

description: test

parameters:

  virtualenv:
    description: use python virtual environment
    type: enum
    enum: ["pipenv", "none"]
    default: "none"

  install-dev:
    description: Install dev packages also. Not necessary if installed on executor
    type: boolean
    default: false

steps:
   - when:
      name: Use standard pipenv virtual env configuration
      condition:
        equal: [ "pipenv" , << parameters.virtualenv >> ]
      steps:
        - run:
            name: Create system venv and install dev packages
            command: |
              PIPENV_VENV_IN_PROJECT=1 pipenv install <<#parameters.install-dev>>--dev<</parameters.install-dev>> --skip-lock --verbose
              echo "PATH=/.venv/bin:\$PATH" >> $BASH_ENV
              pipenv run pip list
