# src/commands/tag.yaml
# yamllint disable rule:line-length
---

description: Pull docker image from registry

parameters:

  registry:
    description: Name of registry
    type: string
    default: docker.io

  image:
    description: Name of image
    type: string

  build-tag:
    description: build sha tag
    type: string

  release-tag:
    description: semantic release tag
    type: string

steps:
  - run:
      name: Tag a local docker image
      command: |
        docker buildx imagetools create \
          --tag "<< parameters.registry >>/<< parameters.image >>:<< parameters.release-tag >>" \
                "<< parameters.registry >>/<< parameters.image >>:<< parameters.build-tag >>"
